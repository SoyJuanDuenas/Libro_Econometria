<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.1.189">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Libro Econometría - Matriz de Pesos Espaciales (W)</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1.6em;
  vertical-align: middle;
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit"
  }
}</script>

  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<link rel="stylesheet" href="styles.css">
</head>

<body class="nav-sidebar docked nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a class="navbar-brand" href="./index.html">
    <span class="navbar-title">Libro Econometría</span>
    </a>
  </div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="./index.html">Acerca de</a>
  </li>  
  <li class="nav-item">
    <a class="nav-link active" href="./about_fundamentos_r.html" aria-current="page">Home</a>
  </li>  
</ul>
              <div id="quarto-search" class="" title="Search"></div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav>
  <nav class="quarto-secondary-nav" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
    <div class="container-fluid d-flex justify-content-between">
      <h1 class="quarto-secondary-nav-title">Matriz de Pesos Espaciales (W)</h1>
      <button type="button" class="quarto-btn-toggle btn" aria-label="Show secondary navigation">
        <i class="bi bi-chevron-right"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse sidebar-navigation docked overflow-auto">
      <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
      </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true">Fundamentos de R</a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./about_fundamentos_r.html" class="sidebar-item-text sidebar-link">Introducción</a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" aria-expanded="true">Series de Tiempo</a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" aria-expanded="true">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-2" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./ts_e_uni.html" class="sidebar-item-text sidebar-link">Series de Tiempo Estacionarias (Univariadas)</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./ts_ne_uni.html" class="sidebar-item-text sidebar-link">Series de Tiempo No Estacionarias (Univariadas)</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./operaciones.html" class="sidebar-item-text sidebar-link">Series de Tiempo Estacionarias (Multivariadas)</a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" aria-expanded="true">Econometría Espacial</a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" aria-expanded="true">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-3" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./about_econometria_espacial.html" class="sidebar-item-text sidebar-link">Introducción</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./spatial_stats.html" class="sidebar-item-text sidebar-link">Estadistica y Relaciones Espaciales</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./w.html" class="sidebar-item-text sidebar-link active">Matriz de Pesos Espaciales (W)</a>
  </div>
</li>
      </ul>
  </li>
    </ul>
    </div>
</nav>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#matriz-de-pesos-espaciales" id="toc-matriz-de-pesos-espaciales" class="nav-link active" data-scroll-target="#matriz-de-pesos-espaciales">Matriz de Pesos Espaciales</a></li>
  <li><a href="#contigüidad-fisica" id="toc-contigüidad-fisica" class="nav-link" data-scroll-target="#contigüidad-fisica">Contigüidad Fisica</a>
  <ul class="collapse">
  <li><a href="#criterio-tipo-torre" id="toc-criterio-tipo-torre" class="nav-link" data-scroll-target="#criterio-tipo-torre">Criterio Tipo Torre</a></li>
  <li><a href="#criterio-tipo-reina" id="toc-criterio-tipo-reina" class="nav-link" data-scroll-target="#criterio-tipo-reina">Criterio Tipo Reina</a></li>
  <li><a href="#criterio-tipo-alfil" id="toc-criterio-tipo-alfil" class="nav-link" data-scroll-target="#criterio-tipo-alfil">Criterio Tipo Alfil</a></li>
  </ul></li>
  <li><a href="#contigüidad-en-función-de-distancia" id="toc-contigüidad-en-función-de-distancia" class="nav-link" data-scroll-target="#contigüidad-en-función-de-distancia">Contigüidad en Función de Distancia</a>
  <ul class="collapse">
  <li><a href="#k---vecinos-más-cercanos-knn" id="toc-k---vecinos-más-cercanos-knn" class="nav-link" data-scroll-target="#k---vecinos-más-cercanos-knn">K - vecinos más cercanos (KNN)</a></li>
  <li><a href="#distancia-basada-en-umbrales-radios" id="toc-distancia-basada-en-umbrales-radios" class="nav-link" data-scroll-target="#distancia-basada-en-umbrales-radios">Distancia Basada en Umbrales / radios</a></li>
  <li><a href="#distancia-inversa" id="toc-distancia-inversa" class="nav-link" data-scroll-target="#distancia-inversa">Distancia Inversa</a></li>
  </ul></li>
  <li><a href="#matriz-de-pesos-espaciales-estandarizada" id="toc-matriz-de-pesos-espaciales-estandarizada" class="nav-link" data-scroll-target="#matriz-de-pesos-espaciales-estandarizada">Matriz de Pesos Espaciales Estandarizada</a></li>
  <li><a href="#operador-de-retardo-espacial" id="toc-operador-de-retardo-espacial" class="nav-link" data-scroll-target="#operador-de-retardo-espacial">Operador de Retardo Espacial</a></li>
  <li><a href="#pendiente" id="toc-pendiente" class="nav-link" data-scroll-target="#pendiente">PENDIENTE</a></li>
  <li><a href="#bibliografia" id="toc-bibliografia" class="nav-link" data-scroll-target="#bibliografia">Bibliografia</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title d-none d-lg-block">Matriz de Pesos Espaciales (W)</h1>
</div>



<div class="quarto-title-meta">

    
    
  </div>
  

</header>

<section id="matriz-de-pesos-espaciales" class="level2">
<h2 class="anchored" data-anchor-id="matriz-de-pesos-espaciales">Matriz de Pesos Espaciales</h2>
<p>Una de las operaciones cruciales en la econometria espacial es expresar formalmente las dependencias espaciales para poder incorporarlas en un modelo, para esto asumimos que las observaciones estan organizadas en datos espaciales los cuales pueden ser puntos en una área regular o irregular, o en su defecto regiones en un mapa.</p>
<p>Para hacer esto vamos a introducir el concepto de Matriz de pesos espaciales o matriz de contigüidad, Considere un sistema S de N unidades espaciales, numeradas i = 1, 2,3,…,n y una variable x observable para cada una de esas unidades espaciales</p>
<p><span class="math display">\[
W = \begin{equation}\begin{bmatrix}w_{11} &amp; w_{12} &amp;  ... &amp; w_{1n}\\w_{21} &amp; w_{22} &amp; ... &amp; w_{2n} \\ ... &amp; ... &amp; ... &amp; ...\\ w_{n1} &amp; w_n2 &amp; ... &amp; w_{nn}\end{bmatrix}\end{equation}
\]</span></p>
<p>donde cada elemento de esta matriz de contigüidad esta definido como:</p>
<p><span class="math display">\[
w_{ij}= \left\{ \begin{array}{lcc} 1 &amp; &nbsp; si &nbsp;&amp; j \in N(i) \\ 0 &amp; &nbsp;si &amp;j \notin N(i)&nbsp;
\end{array} \right.
\]</span></p>
<p>donde <em>N(i)</em> es el conjunto de vecinos de la localización j, De esta manera la matriz W es una matriz cuadrada no estocastica cuyos elementos <em>w</em> reflejan la contigüidad entre los datos espaciales, cada elemento 1 de la matriz correspondera a una contiguidad entre unidades espaciales, por convención un dato espacial no puede ser contigüo consigo mismo lo cual nos resulta en una diagonal principal de ceros.</p>
<p>Para definir la matriz W podemos usar diferentes criterios sobre el conjunto de vecinos de una localización, usualmente recurrimos a criterios de contigüidad fisicos, tal que tenemos 3 tipos de criterios principales:</p>
</section>
<section id="contigüidad-fisica" class="level2">
<h2 class="anchored" data-anchor-id="contigüidad-fisica">Contigüidad Fisica</h2>
<section id="criterio-tipo-torre" class="level3">
<h3 class="anchored" data-anchor-id="criterio-tipo-torre">Criterio Tipo Torre</h3>
<p>La matriz tipo torre define como vecinos a las observaciones o datos espaciales que comparten algún lado espacial, como solo hablamos de lados podemos imaginarnos los movimientos de la ficha de Ajedres Torre</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="movimiento%20torre.png" class="img-fluid figure-img"></p>
</figure>
</div>
</section>
<section id="criterio-tipo-reina" class="level3">
<h3 class="anchored" data-anchor-id="criterio-tipo-reina">Criterio Tipo Reina</h3>
<p>La matriz tipo reina define como vecinos a las observaciones o datos espaciales que comparten cualquier limite espacial, al igual que en el ejemplo anterior podemos imaginarnos los movimientos de la ficha de Ajedres Reina (Dama)</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="movimiento%20dama.png" class="img-fluid figure-img"></p>
</figure>
</div>
</section>
<section id="criterio-tipo-alfil" class="level3">
<h3 class="anchored" data-anchor-id="criterio-tipo-alfil">Criterio Tipo Alfil</h3>
<p>La matriz tipo alfil define como vecinos a las observaciones o datos espaciales que comparten limites diagonales, al igual que en el ejemplo anterior podemos imaginarnos los movimientos de la ficha de Ajedres Alfil</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="movimiento%20alfil.png" class="img-fluid figure-img"></p>
</figure>
</div>
</section>
</section>
<section id="contigüidad-en-función-de-distancia" class="level2">
<h2 class="anchored" data-anchor-id="contigüidad-en-función-de-distancia">Contigüidad en Función de Distancia</h2>
<p>Estos tres criterios anteriores usan al usar una contigüidad fisica son facilmente usables en poligonos regulares, sin embargo, la mayoria de poligonos son poligonos irregulares en donde un criterio de contigüidad fisica es un criterio muy restrictivo, es por esto que recurrimos a marcas o rciterios en función de la distancia, esta distancia se puede calcular de diferentes maneras</p>
<ul>
<li><p>Euclidiana</p></li>
<li><p>Manhattan</p></li>
<li><p>Minskowski</p></li>
</ul>
<section id="k---vecinos-más-cercanos-knn" class="level3">
<h3 class="anchored" data-anchor-id="k---vecinos-más-cercanos-knn">K - vecinos más cercanos (KNN)</h3>
<p>En KNN obtendremos una matriz binaria en la cual generaremos unos centroides en cada poligono espacial, y calcularemos la distancia entre el centroide de nuestro poligono de interés y los centroides de los demas poligonos, los organizaremos y diremos que los k poligonos más cercanos son contigüos</p>
<p><span class="math display">\[
w_{ij}= \left\{ \begin{array}{lcc} 1 &amp; &nbsp; si &nbsp;&amp; \text{el centroide de j es uno de los k centroides cercanos a i} \\ 0 &amp; &nbsp;si &amp; \text{en otro caso}&nbsp;
\end{array} \right.
\]</span></p>
</section>
<section id="distancia-basada-en-umbrales-radios" class="level3">
<h3 class="anchored" data-anchor-id="distancia-basada-en-umbrales-radios">Distancia Basada en Umbrales / radios</h3>
<p>En distancia basada en umbrales o radios obtendremos una matriz binaria en donde a criterio del investigador diremos que hay una contigüidad si la distancia entre centroides esta por debajo de determinado rango.</p>
<p><span class="math display">\[
w_{ij}= \left\{ \begin{array}{lcc} 1 &amp; &nbsp; si &nbsp;&amp; \text{la distancia entre j e i es menor a n distancia} \\ 0 &amp; &nbsp;si &amp; \text{en otro caso}&nbsp;
\end{array} \right.
\]</span></p>
</section>
<section id="distancia-inversa" class="level3">
<h3 class="anchored" data-anchor-id="distancia-inversa">Distancia Inversa</h3>
<p>En la distancia inversa no obtendremos una matriz bianaria sino que nuestro parametro diferente de cero cambiará en función de la distancia inversa, es decir a mayor distancia menor el parametro y viceversa, en este criterio podremos controlar el nivel de descenso de la influencia de la distancia con un parametro alpha, tal que:</p>
<p><span class="math display">\[
w_{ij}= \left\{ \begin{array}{lcc} \frac{1}{d^{\alpha}} &amp; &nbsp; si &nbsp;&amp; i \neq j \\ 0 &amp; &nbsp;si &amp; i = j&nbsp;
\end{array} \right.
\]</span></p>
</section>
</section>
<section id="matriz-de-pesos-espaciales-estandarizada" class="level2">
<h2 class="anchored" data-anchor-id="matriz-de-pesos-espaciales-estandarizada">Matriz de Pesos Espaciales Estandarizada</h2>
<p>Algunas veces requerimos estandarizar la matriz W, esta estandarización corresponde a la siguiente operación por filas:</p>
<p><span class="math display">\[
w^{*}_{ij} = \frac{w_{ij}}{\sum w_{ij}}
\]</span> donde</p>
<p><span class="math display">\[w^{*}_{ij} \in W^{*}\]</span> Es decir cada elemento estandarizado de la matriz de pesos espaciales corresponde a la división entre 0 o 1 y la sumatoria de elementos con relación de esa fila, lo cual seria el porcentaje del total de relaciones de cada fila</p>
<p>Esta estandarización puede ser muy útil en algunas instancias. por ejemplo, usando la matriz de pesos espaciales estandarizada podemos operador de retardo espacial.</p>
</section>
<section id="operador-de-retardo-espacial" class="level2">
<h2 class="anchored" data-anchor-id="operador-de-retardo-espacial">Operador de Retardo Espacial</h2>
<p>Uno de los objetivos del uso de matrices de pesos espaciales en la especificación de un modelo econometrico espacial es poder relatar una variable en un punto en el espacio de las observaciones para esa variable entre otras unidades espaciales en el sistema, esto en el contexto de series de tiempo se le denomina como operador de retardo de la forma:</p>
<p><span class="math display">\[
y_{t-k} = L^{k}y
\]</span></p>
<p>En el espacio no tenemos una dimensión temporal sino una dimensión geografica tal que en función del tipo de criterio que elijamos obtendremos un retardo espacacial diferente, para calcular el retardo espacial usamos:</p>
<p><span class="math display">\[
\rho = W^{*}Y
\]</span></p>
<p>En una matriz de tipo reina obtendremos un rezago parecido al siguiente:</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="Retardo%20Espacial%20Reina.png" class="img-fluid figure-img" width="285"></p>
</figure>
</div>
<p>Mientras que en una matriz de tipo torre tendremos un rezago parecido al siguiente:</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="Retardo%20Espacial%20Torre.png" class="img-fluid figure-img" width="280"></p>
</figure>
</div>
</section>
<section id="pendiente" class="level2">
<h2 class="anchored" data-anchor-id="pendiente">PENDIENTE</h2>
<p>a esta pagina falta añadirle codigo en R y un ejemplo (puede ser el del parcial)</p>
</section>
<section id="bibliografia" class="level2">
<h2 class="anchored" data-anchor-id="bibliografia">Bibliografia</h2>
<p>Anselin, L. (1988). Spatial econometrics: methods and models. Vol. 4. Springer Science &amp; Business Media.</p>
<p>Arbia, G. (2014). <em>A Primer for Spatial Econometrics: With Applications in R</em>. Palgrave Macmillan.</p>
<p><br>
</p>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    target: function(trigger) {
      return trigger.previousElementSibling;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    setTimeout(function() {
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const cites = ref.parentNode.getAttribute('data-cites').split(' ');
    tippyHover(ref, function() {
      var popup = window.document.createElement('div');
      cites.forEach(function(cite) {
        var citeDiv = window.document.createElement('div');
        citeDiv.classList.add('hanging-indent');
        citeDiv.classList.add('csl-entry');
        var biblioDiv = window.document.getElementById('ref-' + cite);
        if (biblioDiv) {
          citeDiv.innerHTML = biblioDiv.innerHTML;
        }
        popup.appendChild(citeDiv);
      });
      return popup.innerHTML;
    });
  }
});
</script>
</div> <!-- /content -->



</body></html>